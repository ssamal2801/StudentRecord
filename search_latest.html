<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We"
      crossorigin="anonymous"
    />

    <title>System Testing</title>
    <style>
      #navbarText {
        padding: 10px;
        display: flex;
        flex-direction: column;
      }
      .navClass {
        background-color: rgb(196, 202, 204);
        width: 100%;
      }
      .card-body {
        margin-left: auto;
        margin-right: auto;
      }
      .card.text-white.bg-secondary.mb-3 {
        margin: 0 auto;
      }
      .btn.btn-primary {
        width: 100%;
      }
    </style>
    <script></script>
  </head>
  <!------BODY------>
  <body>
    <!------NAVIGATION------>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
      <div class="navClass" id="navbarText">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
          <li class="nav-item">
            <a class="nav-link" aria-current="page" href="/home.html">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" aria-current="page" href="/search_all.html"
              >See All Record</a
            >
          </li>
          <li class="nav-item">
            <a class="nav-link active" aria-current="page" href=""
              >See Last Record</a
            >
          </li>
        </ul>
      </div>
    </nav>
    <!--Display all records below-------------->
    <div class="lastRecord"></div>
    <script>
      function deleteUser() {
        var allinfo = JSON.parse(localStorage.getItem("user")) || [];
        allinfo.pop();
        localStorage.setItem("user", JSON.stringify(allinfo));
        alert("user deleted");
        window.location.href = "/search_all.html";
      }
    </script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
      $(document).ready(function () {
        var info = JSON.parse(localStorage.getItem("user")) || [];
        var user = info[info.length - 1];

        if (user != null) {
          $(".lastRecord").append(`
            <div class="card text-white bg-secondary mb-3" style="max-width: 50%;">
            <div class="card-body">
                <div> <h4> First Name: ${user.firstname} </h4> </div>
                <div> <h4>  Last Name: ${user.lastname} </h4> </div>
                <div> <h4>  Mobile: ${user.mob} </h4> </div>
                <div> <h4>  Email: ${user.email} </h4> </div>
                <div> <h4>  Address: ${user.address} </h4> </div>
                <div> <h4>  City: ${user.city} </h4> </div>
                <div> <h4>  Province: ${user.province} </h4> </div>
                <div> <h4>  Zip Code: ${user.zip} </h4> </div>
                <div> <h4>  Note: ${user.notes} </h4> </div>
                <div><button class = "btn btn-primary" onclick="deleteUser()">Delete</button></div>
            </div>
            `);
        } else {
          $(".lastRecord").append(
            `<div class="card text-white bg-secondary mb-3" style="max-width: 50%;">
              <div class="card-body">
                  <div> <h4> No user in record </h4> </div>
              </div>
              </div>`
          );
        }
      });
    </script>
  </body>
</html>
